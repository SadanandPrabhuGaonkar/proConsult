/**
 * dependsOn v1.0.1
 * a jQuery plugin to facilitate the handling of form field dependencies.
 *
 * Copyright 2014 David Street
 * Licensed under the MIT license.
 * Changed by Wim Bouter (De Webmakers)
 */

;(function(e){var t=function(t,n){this.selector=t;this.$dependencyObj=e(t);this.qualifiers=n};t.prototype.enabled=function(t){if(e(this.selector+"[disabled]").length>0){if(t){return false}}else{if(!t){return false}}return true};t.prototype.checked=function(e){if(this.$dependencyObj.attr("type")==="checkbox"||this.$dependencyObj.attr("type")==="radio"){if(!this.$dependencyObj.is(":checked")&&e||this.$dependencyObj.is(":checked")&&!e){return false}}return true};t.prototype.values=function(t){var n=this.$dependencyObj.val(),r=t.length,i=0,s=false,o=[];if(this.$dependencyObj.attr("type")==="radio"){n=this.$dependencyObj.filter(":checked").val()}if((typeof n==="array"||typeof n==="object")&&(typeof t==="array"||typeof t==="object")){e.grep(t,function(t){if(e.inArray(t,n)==-1)o.push(t)});if(o.length==0)s=true;return s}for(i;i<r;i+=1){if(typeof n==="array"||typeof n==="object"){if(e(this.$dependencyObj.val()).not(e(t[i])).length===0&&e(t[i]).not(e(this.$dependencyObj.val())).length===0){s=true;break}}else{if(t[i]===n){s=true;break}}}return s};t.prototype.not=function(e){var t=this.$dependencyObj.val(),n=e.length,r=0;for(r;r<n;r+=1){if(e[r]===t){return false}}return true};t.prototype.match=function(e){var t=this.$dependencyObj.val(),n=e;return t.match(n)};t.prototype.notmatch=function(e){var t=this.$dependencyObj.val(),n=e;var r=t.match(n);if(r){return false}else{return true}};t.prototype.contains=function(t){var n=this.$dependencyObj.val(),r=0;if(typeof n==="array"||typeof n==="object"){for(r in t){if(e.inArray(t[r],n)!==-1){return true}}}else{return this.values(t)}return false};t.prototype.doesQualify=function(){var e=0;for(e in this.qualifiers){if(t.prototype.hasOwnProperty(e)&&typeof t.prototype[e]==="function"){if(!this[e](this.qualifiers[e])){return false}}else{if(typeof (this.qualifiers[e]==="function")){return this.qualifiers[e](this.$dependencyObj.val())}}}return true};var n=function(e){var n=0;this.dependencies=[];for(n in e){this.dependencies.push(new t(n,e[n]))}};n.prototype.doesQualify=function(){var e=this.dependencies.length,t=0,n=true;for(t;t<e;t+=1){if(!this.dependencies[t].doesQualify()){n=false;break}}return n};var r=function(t,n,r){this.dependencySets=[];this.$subject=t;this.settings=e.extend({disable:true,hide:true,duration:200,onEnable:function(){},onDisable:function(){}},r);this.enableCallback=function(){};this.disableCallback=function(){};this.init(n)};r.prototype.init=function(e){this.addSet(e);this.check(true)};r.prototype.addSet=function(e){var t=this,r=0,i=0,s=0,o;this.dependencySets.push(new n(e));r=this.dependencySets.length-1;i=this.dependencySets[r].dependencies.length;for(s;s<i;s+=1){o=this.dependencySets[r].dependencies[s];o.$dependencyObj.on("change",function(e){t.triggeredEvent=e;t.triggeredDependency=this;t.check()});if(o.$dependencyObj.attr("type")==="radio"){o.$dependencyObj.on("deselect",function(e){t.triggeredEvent=e;t.triggeredDependency=this;t.check()})}if(o.$dependencyObj.attr("type")==="text"||o.$dependencyObj.attr("type")==="email"||o.$dependencyObj.attr("type")==="url"||o.$dependencyObj.attr("type")==="password"||o.$dependencyObj.attr("type")==="number"||o.$dependencyObj.attr("type")==="tel"){o.$dependencyObj.on("keydown, keyup",function(e){if(e.which&&o.$dependencyObj.is(":focus")){if(t.check()){t.triggeredEvent=e;t.triggeredDependency=this;t.check()}}})}}};r.prototype.or=function(e){this.addSet(e);this.check(false);return this};r.prototype.enable=function(t){var n=this.$subject,r=this.$subject.attr("id"),i;if(this.settings.hasOwnProperty("valueTarget")&&this.settings.valueTarget!==undefined){n=e(this.settings.valueTarget)}else if(this.$subject[0].nodeName.toLowerCase()!=="input"&&this.$subject[0].nodeName.toLowerCase()!=="textarea"&&this.$subject[0].nodeName.toLowerCase()!=="select"){n=this.$subject.find("input, textarea, select")}this.settings.onEnable.call(this.triggeredDependency,this.triggeredEvent,e(this.triggeredDependency).attr("id"))};r.prototype.disable=function(t){var n=this.$subject,r=this.$subject.attr("id"),i;if(this.settings.hasOwnProperty("valueTarget")&&this.settings.valueTarget!==undefined){n=e(this.settings.valueTarget)}else if(this.$subject[0].nodeName.toLowerCase()!=="input"&&this.$subject[0].nodeName.toLowerCase()!=="textarea"&&this.$subject[0].nodeName.toLowerCase()!=="select"){n=this.$subject.find("input, textarea, select")}this.settings.onDisable.call(this.triggeredDependency,this.triggeredEvent,e(this.triggeredDependency).attr("id"))};r.prototype.check=function(e){var t=this.dependencySets.length,n=0,r=false;for(n;n<t;n+=1){if(this.dependencySets[n].doesQualify()){r=true;break}}if(r){this.enable(e);return true}else{this.disable(e);return false}};e.fn.dependsOn=function(e,t){var n=new r(this,e,t);return n}})(jQuery);
