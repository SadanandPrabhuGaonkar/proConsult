<?php defined('C5_EXECUTE') or die("Access Denied.");
$site = Config::get('concrete.site');
$themePath = $this->getThemePath();
$ih = new \Application\Concrete\Helpers\ImageHelper();
$navItems = $controller->getNavItems();
$c = Page::getCurrentPage();

foreach ($navItems as $ni) {
    $classes = array();

    if ($ni->isCurrent) {
        //class for the page currently being viewed
        $classes[] = 'nav-selected';
    }

    if ($ni->inPath) {
        //class for parent items of the page currently being viewed
        $classes[] = 'nav-path-selected';
    }

    if ($ni->hasSubmenu) {
        $classes[] = 'has-submenu';
    } else {
        $classes[] = 'no-submenu';
    }

    $ni->classes = implode(" ", $classes);
}

if (count($navItems) > 0) {

    echo '<header>';
    echo '<div class="common-padding-side">';
    echo '<div class="header-inner">';
    echo '<div class="logo">';
    echo '<a href="' . View::url('/') . '">';
    echo '<img src="' . $themePath . '/dist/images/logo.svg" alt="' . $site . '"/>';
    echo '</a>';
    echo '</div>';
    echo '<nav>';
    echo '<ul>'; //opens the top-level menu

    foreach ($navItems as $ni) {
        $url = $ni->hasSubmenu ? "#" : $ni->url;

        if($ni->level == 1){
            echo '<li class="' . $ni->classes . '">'; //opens a nav item
            echo '<a href="' . $url . '">' . h($ni->name) . '</a>';
        }else{
            echo '<li class="sub">';
            echo '<div class="inner">';
            echo '<img src="' . $ih->getThumbnail($ni->cObj->getAttribute("logo_img")) . '" alt="' . $ni->name . '" border="0">';
            echo '</div>';
            echo '<a href="' . $ni->url . '">' . h($ni->name) . '</a>';
            echo '<a href="' . $ni->url . '" class="absolute-a"></a>';
        }

        if ($ni->hasSubmenu) {
            echo '<ul>'; //opens a sub nav item
        } else {
            echo '</li>'; //closes a nav item

            echo str_repeat('</ul></li>', $ni->subDepth); //closes dropdown sub-menu(s) and their top-level nav item(s)
        }
    }

    echo '</ul>'; //closes the top-level menu
    echo '</nav>';
    echo '</div>';
    echo '<div class="header-btn">';
    echo '<div class="header-btn-inner">
            <div class="svg">
            <svg width="30" height="22" viewBox="0 0 30 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_384_2491)">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M26.607 22H3.34418V18.8857C3.46623 15.2599 6.98129 12.5015 9.10496 9.36501V6.60667H12.6444V8.58644H17.4044V6.60667H20.9439V9.36501C23.2384 12.724 26.607 14.9039 26.607 18.8412V22ZM29.9024 9.36501C29.9024 8.87562 30 8.38624 29.9268 7.85237C27.3149 8.63093 24.7762 8.40849 22.2864 7.16278C22.1888 8.00808 22.3352 8.7644 22.677 9.47623C23.5557 11.2558 29.8291 11.8564 29.9024 9.36501ZM0.0732303 9.36501C0.0732303 8.87562 -0.0244101 8.38624 0.0488202 7.85237C2.6607 8.63093 5.19935 8.40849 7.68918 7.16278C7.78682 8.00808 7.64036 8.7644 7.29862 9.47623C6.41985 11.2558 0.12205 11.8564 0.0732303 9.36501ZM0 7.09605C2.09927 -1.82407 28.1692 -2.89182 30 7.11829C27.4614 7.76339 24.8739 7.38523 22.2864 6.31749C22.3596 5.85035 22.2376 5.47219 21.9691 5.16076C20.4312 3.40343 9.42229 3.3367 8.00651 5.2275C7.78682 5.51668 7.68918 5.87259 7.71359 6.273C5.15053 7.69666 2.56306 8.03033 0 7.09605ZM11.5216 10.6107C12.1074 10.6107 12.5712 11.0334 12.5712 11.5672C12.5712 12.1011 12.1074 12.5238 11.5216 12.5238C10.9357 12.5238 10.4719 12.1011 10.4719 11.5672C10.4963 11.0556 10.9601 10.6107 11.5216 10.6107ZM18.2587 15.9494C18.8446 15.9494 19.3084 16.3721 19.3084 16.906C19.3084 17.4398 18.8446 17.8625 18.2587 17.8625C17.6729 17.8625 17.2091 17.4398 17.2091 16.906C17.2091 16.3943 17.6729 15.9494 18.2587 15.9494ZM14.8902 15.9494C15.476 15.9494 15.9398 16.3721 15.9398 16.906C15.9398 17.4398 15.476 17.8625 14.8902 17.8625C14.3043 17.8625 13.8405 17.4398 13.8405 16.906C13.8405 16.3943 14.3043 15.9494 14.8902 15.9494ZM11.5216 15.9494C12.1074 15.9494 12.5712 16.3721 12.5712 16.906C12.5712 17.4398 12.1074 17.8625 11.5216 17.8625C10.9357 17.8625 10.4719 17.4398 10.4719 16.906C10.4963 16.3943 10.9601 15.9494 11.5216 15.9494ZM18.2587 13.2801C18.8446 13.2801 19.3084 13.7027 19.3084 14.2366C19.3084 14.7705 18.8446 15.1931 18.2587 15.1931C17.6729 15.1931 17.2091 14.7705 17.2091 14.2366C17.2091 13.725 17.6729 13.2801 18.2587 13.2801ZM14.8902 13.2801C15.476 13.2801 15.9398 13.7027 15.9398 14.2366C15.9398 14.7705 15.476 15.1931 14.8902 15.1931C14.3043 15.1931 13.8405 14.7705 13.8405 14.2366C13.8405 13.725 14.3043 13.2801 14.8902 13.2801ZM11.5216 13.2801C12.1074 13.2801 12.5712 13.7027 12.5712 14.2366C12.5712 14.7705 12.1074 15.1931 11.5216 15.1931C10.9357 15.1931 10.4719 14.7705 10.4719 14.2366C10.4963 13.725 10.9601 13.2801 11.5216 13.2801ZM18.2587 10.6107C18.8446 10.6107 19.3084 11.0334 19.3084 11.5672C19.3084 12.1011 18.8446 12.5238 18.2587 12.5238C17.6729 12.5238 17.2091 12.1011 17.2091 11.5672C17.2091 11.0556 17.6729 10.6107 18.2587 10.6107ZM14.8902 10.6107C15.476 10.6107 15.9398 11.0334 15.9398 11.5672C15.9398 12.1011 15.476 12.5238 14.8902 12.5238C14.3043 12.5238 13.8405 12.1011 13.8405 11.5672C13.8405 11.0556 14.3043 10.6107 14.8902 10.6107Z" fill="#263790"/>
            </g>
            <defs>
            <clipPath id="clip0_384_2491">
            <rect width="30" height="22" fill="white"/>
            </clipPath>
            </defs>
            </svg>
            
            

            </div>
            <div class="num">
            <a href="tel:+917218386120" target="_blank">+917218386120</a>
            </div>
            </div>
            ';
    echo '<a class="search"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8.94975 0H8.95261V0.00128549C11.4232 0.00202005 13.6602 1.02986 15.2791 2.69071C16.8953 4.34917 17.8965 6.64174 17.8981 9.17378H17.8993V9.17984V9.18719H17.8981C17.8972 10.2077 17.7339 11.1898 17.4336 12.1056C17.3833 12.2593 17.3307 12.407 17.2766 12.548V12.5493C17.0177 13.2214 16.6831 13.8568 16.2835 14.4421L21.4903 19.2423L21.4935 19.2452L21.5216 19.272L21.5236 19.274C21.8176 19.5611 21.9776 19.9454 21.9979 20.3355C22.0175 20.7211 21.9006 21.1156 21.6435 21.432L21.6416 21.4349L21.6102 21.4722L21.604 21.4786L21.5778 21.508L21.575 21.5119C21.2948 21.8134 20.9208 21.9772 20.5401 21.9978C20.1647 22.0182 19.7798 21.8986 19.4711 21.6346L19.4684 21.6325L19.4319 21.6004L19.4267 21.596L14.1012 16.6865C13.9437 16.8004 13.7829 16.9086 13.6201 17.0107C13.3994 17.1493 13.1707 17.2799 12.9375 17.3991C11.7381 18.0128 10.3828 18.358 8.94993 18.358V18.3593H8.94706V18.358C6.47652 18.3573 4.23908 17.3295 2.62022 15.6686C1.00351 14.0101 0.00286461 11.7172 0.00125327 9.1859H0V9.17984V9.1769H0.00125327C0.00196942 6.64284 1.00404 4.34788 2.62326 2.6874C4.24016 1.02986 6.47526 0.00293825 8.94384 0.00128549V0H8.94975ZM8.95261 2.05861V2.0599H8.94975H8.94384V2.05861C7.03064 2.0599 5.29648 2.85745 4.04106 4.14459C2.78583 5.43173 2.00755 7.21231 2.00701 9.17709H2.00827V9.18003V9.18609H2.00701C2.00827 11.1485 2.78529 12.9263 4.04071 14.2144C5.29558 15.502 7.03154 16.3003 8.94688 16.3007V16.2994H8.94975H8.95566V16.3007C10.8689 16.2994 12.6023 15.5022 13.8581 14.2147C15.1133 12.9276 15.8916 11.1476 15.8919 9.18296H15.8909V9.18003V9.17397H15.8919C15.8909 7.21158 15.1131 5.43283 13.8584 4.14514C12.6036 2.85745 10.8681 2.05917 8.95261 2.05861Z" fill="white"/>
    </svg>
    </a>';
    echo '</div>';
    echo '<nav class="mobile">';
    echo '<a class="search"><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8.94975 0H8.95261V0.00128549C11.4232 0.00202005 13.6602 1.02986 15.2791 2.69071C16.8953 4.34917 17.8965 6.64174 17.8981 9.17378H17.8993V9.17984V9.18719H17.8981C17.8972 10.2077 17.7339 11.1898 17.4336 12.1056C17.3833 12.2593 17.3307 12.407 17.2766 12.548V12.5493C17.0177 13.2214 16.6831 13.8568 16.2835 14.4421L21.4903 19.2423L21.4935 19.2452L21.5216 19.272L21.5236 19.274C21.8176 19.5611 21.9776 19.9454 21.9979 20.3355C22.0175 20.7211 21.9006 21.1156 21.6435 21.432L21.6416 21.4349L21.6102 21.4722L21.604 21.4786L21.5778 21.508L21.575 21.5119C21.2948 21.8134 20.9208 21.9772 20.5401 21.9978C20.1647 22.0182 19.7798 21.8986 19.4711 21.6346L19.4684 21.6325L19.4319 21.6004L19.4267 21.596L14.1012 16.6865C13.9437 16.8004 13.7829 16.9086 13.6201 17.0107C13.3994 17.1493 13.1707 17.2799 12.9375 17.3991C11.7381 18.0128 10.3828 18.358 8.94993 18.358V18.3593H8.94706V18.358C6.47652 18.3573 4.23908 17.3295 2.62022 15.6686C1.00351 14.0101 0.00286461 11.7172 0.00125327 9.1859H0V9.17984V9.1769H0.00125327C0.00196942 6.64284 1.00404 4.34788 2.62326 2.6874C4.24016 1.02986 6.47526 0.00293825 8.94384 0.00128549V0H8.94975ZM8.95261 2.05861V2.0599H8.94975H8.94384V2.05861C7.03064 2.0599 5.29648 2.85745 4.04106 4.14459C2.78583 5.43173 2.00755 7.21231 2.00701 9.17709H2.00827V9.18003V9.18609H2.00701C2.00827 11.1485 2.78529 12.9263 4.04071 14.2144C5.29558 15.502 7.03154 16.3003 8.94688 16.3007V16.2994H8.94975H8.95566V16.3007C10.8689 16.2994 12.6023 15.5022 13.8581 14.2147C15.1133 12.9276 15.8916 11.1476 15.8919 9.18296H15.8909V9.18003V9.17397H15.8919C15.8909 7.21158 15.1131 5.43283 13.8584 4.14514C12.6036 2.85745 10.8681 2.05917 8.95261 2.05861Z" fill="white"/>
    </svg>
    </a>';
    echo '<div class="mobile-menu">';
    echo '<span class="nav-icon"></span>';
    echo '</div>';
    echo '</nav>';
    echo '</div>';
    echo '</header>';

} elseif (is_object($c) && $c->isEditMode()) {
    ?>
    <div class="ccm-edit-mode-disabled-item"><?= t('Empty Auto-Nav Block.') ?></div>
    <?php
}
?>
